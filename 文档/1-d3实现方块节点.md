# 需求：vue 内实现d3显示方块节点

### 1，后端写接口

1. 数据的json文件

2. 写controller 和 router

   先使用简单的数据保证可以get到

```js
const Controller = require('egg').Controller;

class TreeController extends Controller {
    async getTreeData() {
        const { ctx } = this
        ctx.body = 'Hello getTreeData -----';
    }
}
module.exports = TreeController;
```

这个时候只使用了controller的数据，但是service写错了，执行的时候还是报错

—— 这个egg框架的执行是所有的代码都测试一次么？

接口成功

3. 写service

   官方说明，service产生controller需要的数据

```js
// service
const Service = require('egg').Service;

const path = require('path')
const fs = require('fs')
class TreeDataService extends Service {
    treeData() {
        let file = path.join(__dirname, '../data/treeData.json')
        let data =  fs.readFileSync(file)
        let res = data.toString();
        const treeList = JSON.parse(res);
        return treeList
    }
}
module.exports = TreeDataService;
```

```js
// controller
const Controller = require('egg').Controller;

class TreeController extends Controller {
    async getTreeData() {
        const { ctx } = this
        // ctx.body = 'Hello getTreeData -----';
        const treeData = await ctx.service.treeDataSer.treeData()
        console.log('treeData', treeData)
        ctx.status = 200
        ctx.body = {
            data: treeData
        }
    }
}
module.exports = TreeController;
```



### 2，修改eslint

```js
module.exports = {
  root: true,
  // env: {
  //   node: true
  // },
  // extends: [
  //   'plugin:vue/essential',
  //   '@vue/standard'
  // ],
  parserOptions: {
    // parser: 'babel-eslint',
    parser: 'module'
  },
  plugins: [
    'html'
  ]
  // rules: {
  //   // 'no-console': process.env.NODE_ENV === 'production' ? 'warn' : 'off',
  //   'no-console': 'off',
  //   'no-extra-semi': 'off',
  //   'no-irregular-whitespace': 'off'
  // }
}
```

不需要eslint的检查，就注释所有eslint内部的代码，但是引起import 报错

只能修改eslint 如上方式，既没有import报错，也没有eslint检查

eslint 暂时不想解决，重新开一个文件夹

### 3，vue 使用axios请求数据

3.1）安装axios，配置axios

1. 创建api文件夹，建立api.js 和 http.js

    http.js —— 封装post 和 get 方法

   api.js —— 请求具体的接口

3.2）请求接口





